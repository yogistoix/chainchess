const { spawn } = require('child_process');

function getStockfishMove(fen, callback) {
  const stockfish = spawn('stockfish');

  stockfish.stdout.on('data', (data) => {
    const output = data.toString();
    if (output.includes('bestmove')) {
      const bestMove = output.split('bestmove ')[1].split(' ')[0];
      callback(bestMove);
    }
  });

  stockfish.stdin.write(`position fen ${fen}\n`);
  stockfish.stdin.write('go\n');
}

// Example Usage:
const initialFEN = 'rnbqkbnr/pppppppp/8/8/8/8/PPPPPPPP/RNBQKBNR w KQkq - 0 1';
getStockfishMove(initialFEN, (move) => {
  console.log('Best move:', move);  // Outputs the best move from the initial position
});
